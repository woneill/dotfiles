alias ack=ag

# Brew verison of openssh
if [ -f "$(brew --prefix)/bin/ssh-agent" ]; then
    args=()
    if [ -f "${OPENSC_PKCS11}" ]; then
        pkcs11_whitelist="/usr/lib/*,/usr/local/lib/*,${OPENSC_PKCS11}"
        args+=(-P ${pkcs11_whitelist})
    fi
    eval "$(ssh-agent "${args[@]}")"

    function cleanup {
        echo "Killing SSH-Agent"
        "$(brew --prefix)/bin/ssh-agent" -k
    }
fi

export JAVA_HOME="/Library/Internet Plug-Ins/JavaAppletPlugin.plugin/Contents/Home"
export EDITOR=/usr/local/bin/vim

alias dns="sudo launchctl unload -w /System/Library/LaunchDaemons/com.apple.mDNSResponder.plist; sudo launchctl load -w /System/Library/LaunchDaemons/com.apple.mDNSResponder.plist"

if [ -f $(brew --prefix)/etc/bash_completion ]; then
    . $(brew --prefix)/etc/bash_completion
    source $(brew --prefix)/etc/bash_completion.d/git-prompt.sh
    export GIT_PS1_SHOWDIRTYSTATE=true
    export GIT_PS1_SHOWUNTRACKEDFILES=true
    export GIT_PS1_SHOWUPSTREAM='verbose name'
    #export GIT_PS1_SHOWCOLORHINTS=true
    PS1='\h:\W$(__git_ps1 " (%s)")\$ '
fi

# A bash function to display a growl notification using iTerm's magic
# escape sequence. This version will work under screen.

growl() {
    local msg="\\e]9;\n\n${*}\\007"
    case $TERM in
        screen*)
            echo -ne '\eP'${msg}'\e\\' ;;
        *)
            echo -ne ${msg} ;;
    esac
    return
}
